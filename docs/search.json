[
  {
    "objectID": "posts/forest-plot-table/index.html",
    "href": "posts/forest-plot-table/index.html",
    "title": "Forest Plots with Built-In Tables",
    "section": "",
    "text": "I’ve seen this kind of figure poking around, but I didn’t really think about them until the other day I was asked about how to make one in R. Here I will walk through making one of these plots using the ggplot2 and cowplot packages.\nTo start with I have some fake data, d.\n\n\nCode\nd |> \n    kable(format = \"html\") |> \n    kable_styling(full_width = F)\n\n\n\n\n \n  \n    name \n    mean \n    lower \n    upper \n  \n \n\n  \n    Covfefe \n    1.1989430 \n    1.0707825 \n    1.358700 \n  \n  \n    Coffee \n    1.8509518 \n    1.5589701 \n    2.227752 \n  \n  \n    Variable \n    1.2181512 \n    1.0834045 \n    1.411683 \n  \n  \n    Covariate \n    1.1970336 \n    1.0699671 \n    1.342737 \n  \n  \n    Predictor \n    0.9085823 \n    0.8049225 \n    1.000000 \n  \n  \n    Smoking \n    0.8770238 \n    0.7447709 \n    1.000000 \n  \n  \n    Age \n    0.9344551 \n    0.8305984 \n    1.000000 \n  \n  \n    Uranium \n    0.9177338 \n    0.8021060 \n    1.000000 \n  \n  \n    Stuff \n    1.0760010 \n    1.0000000 \n    1.216474 \n  \n  \n    Thing \n    0.9143605 \n    0.7753231 \n    1.000000 \n  \n  \n    Koffing \n    1.0686924 \n    1.0000000 \n    1.178642 \n  \n  \n    Coughing \n    1.0648236 \n    1.0000000 \n    1.194998 \n  \n  \n    Polvo \n    0.9227277 \n    0.8097846 \n    1.000000 \n  \n\n\n\n\n\n\nThe Forest Plot\nThe forest plot itself is not hard to do. Notice how I create this striped pattern with geom_vline(aes(xintercept = name), col = \"grey95\", size = 5). I’ll do the same thing to the table part of the figure later.\n\n\nCode\np1 <- d |> \n    mutate(name = fct_reorder(name, mean)) |> \n    ggplot(aes(x = name, y = mean,\n                  ymin = lower, ymax = upper)) +\n    geom_vline(aes(xintercept = name), col = \"grey95\", size = 5) +\n    geom_hline(yintercept = 1, lty = 2) +\n    geom_point() +\n    geom_linerange() +\n    coord_flip() +\n    labs(x = NULL, y = NULL) +\n    theme(plot.margin = margin(t = 5, r = -4, b = 5, l = 5))\n\np1\n\n\n\n\n\n\n\nThe Table\nTo make the table look nice I convert the numbers to text and clean them up so that the text is justified nicely when plotting it. I did some manual tuning of the margins to make the plot and table line up nicely.\n\n\nCode\np2 <- d |> \n    mutate(name = fct_reorder(name, mean),\n           mean = round(mean, 2),\n           mean = str_pad(mean, width = 4, side = \"right\", pad = \"0\"),\n           lower = round(lower, 2),\n           lower = as.character(lower),\n           lower = ifelse(lower == \"1\", \"1.00\", lower),\n           lower = str_pad(lower, width = 4, side = \"right\", pad = \"0\"),\n           upper = round(upper, 2),\n           upper = as.character(upper),\n           upper = ifelse(upper == \"1\", \"1.00\", upper),\n           upper = str_pad(upper, width = 4, side = \"right\", pad = \"0\"),\n           ci = str_c(lower, \", \", upper)) |> \n    ggplot(aes(x = name)) +\n    geom_vline(aes(xintercept = name), col = \"grey95\", size = 5) +\n    geom_text(aes(label = mean, y = 1)) +\n    geom_text(aes(label = ci, y = 1.07)) +\n    coord_flip(ylim = c(0.99, 1.1)) +\n    theme(axis.title = element_blank(),\n          axis.text = element_blank(),\n          axis.ticks = element_blank(),\n          axis.line.y = element_blank(),\n          panel.border = element_blank(), \n          panel.grid = element_blank(), \n          plot.background = element_blank(),\n          plot.margin = margin(t = 5, r = 5, b = 19.3, l = 0))\n\np2\n\n\n\n\n\n\nThe finished bottom row\nNow we have alligned the plot and table. If you zoom in you might see that they don’t line up perfectly. I am not liable for any bodily harm caused by this.\n\n\nCode\nbottom_row <- plot_grid(p1, p2, nrow = 1, rel_widths = c(1, 0.3)) \n\nbottom_row\n\n\n\n\n\n\n\n\nThe headers\nI admit that this is a pretty handwavy manual way to make the header fit, and there is probably a nice way to automatically fit this using the coordinate system.\n\n\nCode\ntop_row <- ggplot(data = tibble()) +\n    geom_text(aes(y = 1, x = 0.02, label = \"Variable\"), size = 5) +\n    geom_text(aes(y = 1, x = 0.84, label = \"Mean\"), size = 5) +\n    geom_text(aes(y = 1, x = 0.98, label = \"95% CI\"), size = 5) +\n    coord_cartesian(xlim = c(0, 1)) +\n    theme_void() +\n    theme(plot.margin = margin(t = 0, r = 5, b = 0, l = 5),\n          axis.line.x.bottom = element_line())\n\n\ntop_row\n\n\n\n\n\n\n\nPutting it all together\nAnd so we come to the finished plot. If we wrangle the rel_heights setting a little bit we can get a pretty nice looking forest plot and table hybrid.\n\n\nCode\nplot_grid(top_row, bottom_row, ncol = 1, rel_heights = c(0.07, 1))\n\n\n\n\n\nThis was actually less of an inconvenience than I thought. The mixture of ggplot2 and cowplot made this a pretty easy task."
  },
  {
    "objectID": "index_old.html",
    "href": "index_old.html",
    "title": "bggj",
    "section": "",
    "text": "Ég er doktorsnemi í tölfræði við Verkfræði- og Náttúruvísindasvið Háskóla Íslands að rannsaka tölfræðilega skölun á hámarksúrkomu á klukkustundarskala frá veðurfræðilíkani á þéttu landfræðilegu neti. Auk þessa kenni ég Tölfræðiráðgjöf og vinn hjá Hjartavernd.\nÉg býð upp á tölfræðiráðgjöf gegn gjaldi og hvet þig til að hafa samband ef þig vantar aðstoð!"
  },
  {
    "objectID": "index_old.html#fyrirlestrar-viðtöl-og-fleira",
    "href": "index_old.html#fyrirlestrar-viðtöl-og-fleira",
    "title": "bggj",
    "section": "Fyrirlestrar, viðtöl og fleira",
    "text": "Fyrirlestrar, viðtöl og fleira\n\n\n\n\n\n\n\n\n\n\nDatabeers #2\n\n\nI gave a talk at the 2nd Databeers event hosted by Lucinity. There I talked about open data and helping people make sense of official or press statements by putting them…\n\n\n\n\n\n\nSep 16, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nInterview on the University website\n\n\nHalldór Marteinsson interviewed me for the University of Iceland website about statistics, covid-19 predictions and more.\n\n\n\n\n\n\nDec 22, 2020\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStanCon2020: COVID-19 Prediction Model\n\n\nI gave a talk about the statistical methodology behind the prediction model used by the Icelandic government during the first wave of the COVID-19 pandemic.\n\n\n\n\n\n\nAug 13, 2020\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index_old.html#færslur",
    "href": "index_old.html#færslur",
    "title": "bggj",
    "section": "Færslur",
    "text": "Færslur\n\n\n\n\n  \n\n\n\n\nForest Plots with Built-In Tables\n\n\nCreating forest plots with coefficient tables in ggplot2 with cowplot\n\n\nI’ve seen this kind of figure poking around, but I didn’t really think about them until the other day I was asked about how to make one in R. Here I will walk through making one of these plots using the ggplot2 and cowplot packages.\n\n\n\n\n\n\nJun 28, 2022\n\n\nBrynjólfur Gauti Guðrúnar Jónsson\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "talks/hi-vefur/index.html",
    "href": "talks/hi-vefur/index.html",
    "title": "Interview on the University website",
    "section": "",
    "text": "Find the iterview here"
  },
  {
    "objectID": "talks/databeers_2022_09_16/index.html",
    "href": "talks/databeers_2022_09_16/index.html",
    "title": "Databeers #2",
    "section": "",
    "text": "The presentations were in the PechaKucha format:\n\n20 slides\n20 seconds per slide\n\n\n\nLink to the slides in full size"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "bggj",
    "section": "",
    "text": "Forest Plots with Built-In Tables\n\n\nCreating forest plots with coefficient tables in ggplot2 with cowplot\n\n\nI’ve seen this kind of figure poking around, but I didn’t really think about them until the other day I was asked about how to make one in R. Here I will walk through making one of these plots using the ggplot2 and cowplot packages.\n\n\n\n\n\n\nJun 28, 2022\n\n\nBrynjólfur Gauti Guðrúnar Jónsson\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Brynjólfur Gauti Guðrúnar Jónsson",
    "section": "",
    "text": "I am a statistics PhD student at the University of Iceland researching improved 21st century projections of sub-daily extreme precipitation by spatio-temporal recalibration. I also teach Statistical consulting and work at The Icelandic Heart Association."
  },
  {
    "objectID": "about.html#talks-interviews-etc.",
    "href": "about.html#talks-interviews-etc.",
    "title": "Brynjólfur Gauti Guðrúnar Jónsson",
    "section": "Talks, interviews etc.",
    "text": "Talks, interviews etc.\n\n\n\n\n\n\n\n\n\n\nDatabeers #2\n\n\nI gave a talk at the 2nd Databeers event hosted by Lucinity. There I talked about open data and helping people make sense of official or press statements by putting them…\n\n\n\n\n\n\nSep 16, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nInterview on the University website\n\n\nHalldór Marteinsson interviewed me for the University of Iceland website about statistics, covid-19 predictions and more.\n\n\n\n\n\n\nDec 22, 2020\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStanCon2020: COVID-19 Prediction Model\n\n\nI gave a talk about the statistical methodology behind the prediction model used by the Icelandic government during the first wave of the COVID-19 pandemic.\n\n\n\n\n\n\nAug 13, 2020\n\n\n\n\n\n\n\n\nNo matching items"
  }
]